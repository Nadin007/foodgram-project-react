![yamdb_workflow](https://github.com/Nadin007/foodgram-project-react/actions/workflows/foodgram-workflow.yml/badge.svg)

# О проекте foodgram-project-react

Приложение «Продуктовый помощник»: сайт, на котором пользователи будут публиковать рецепты, добавлять чужие рецепты в избранное и подписываться на публикации других авторов. Сервис «Список покупок» позволит пользователям создавать список продуктов, которые нужно купить для приготовления выбранных блюд.

## Возможнности

- Что могут делать неавторизованные пользователи
  - Создать аккаунт.
  - Просматривать рецепты на главной.
  - Просматривать отдельные страницы рецептов.
  - Просматривать страницы пользователей.
  - Фильтровать рецепты по тегам.

- Что могут делать авторизованные пользователи
  - Входить в систему под своим логином и паролем.
  - Выходить из системы (разлогиниваться).
  - Менять свой пароль.
  - Создавать/редактировать/удалять собственные рецепты
  - Просматривать рецепты на главной.
  - Просматривать страницы пользователей.
  - Просматривать отдельные страницы рецептов.
  - Фильтровать рецепты по тегам.
  - Работать с персональным списком избранного: добавлять в него рецепты или удалять их, просматривать свою страницу избранных рецептов.
  - Работать с персональным списком покупок: добавлять/удалять любые рецепты, выгружать файл со количеством необходимых ингридиентов для рецептов из списка покупок.
  - Подписываться на публикации авторов рецептов и отменять подписку, просматривать свою страницу подписок.

- Что может делать администратор
  - Администратор обладает всеми правами авторизованного пользователя.
  - изменять пароль любого пользователя,
  - создавать/блокировать/удалять аккаунты пользователей,
  - редактировать/удалять любые рецепты,
  - добавлять/удалять/редактировать ингредиенты.
  - добавлять/удалять/редактировать теги.

## Технология

использует ряд проектов с открытым исходным кодом для правильной работы:

- [Django 3.2.9] - веб-фреймворк Python высокого уровня.
- [Python 3.9]
- База данных PostgreSQL.

И, конечно, сам API_YAMDB имеет открытый исходный код в [частном репозитории][Nadin007/foodgram-project-react]
на GitHub.

## Установка приложения

Клонировать и перейти в репозиторий с помощью терминала:

```sh
git clone git@github.com:Nadin007/foodgram-project-react.git
```

```sh
cd backend/
```

### Запуск foodgram-project-react в режиме разработки:

- Создать и активировать виртуальную среду

```sh
python3 -m venv env

```
```sh
source venv/bin/activate

```
- Установить зависимости из файла requirements.txt

```sh
pip install -r requirements.txt
```
- В папке с файлом manage.py выполните команду:

```sh
cd recipe_backend/
```

```sh
python3 manage.py runserver
````

### Запуск foodgram-project-react в [Docker]:

- Выполните команду:

```sh
cd ../../infra
```

- Запустить docker-compose:

```sh
docker-compose up -d --build
```
- Выполнить миграции в базе данных:

```sh
docker-compose exec web python manage.py migrate --noinput
```
- Создать суперпользователя:

```sh
docker-compose exec web python manage.py createsuperuser
```
- Собрать статические файлы:

```sh
docker-compose exec web python manage.py collectstatic --no-input
```
- Проект доступен по адресу:

`http://localhost/recipes`

## Инструкция по заполнению .env

- Создайте файл .env с переменными окружения для работы с базой данных в дирректории infra/:

```sh
touch .env
```
- Вставте в файл данные переменного окружения:

```
DB_ENGINE=django.db.backends.postgresql
DB_NAME=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
DB_HOST=db
DB_PORT=5432
```

-  Для генерирования нового секретного ключа запустите следующую команду в терменале:

```sh
python3 manage.py shell
>>> from django.core.management.utils import get_random_secret_key
>>> print(get_random_secret_key())
```

- Скопируйте полученный ключ и вставьте в папку .env:

```sh
...

SECRET_KEY =полученный_ключ
```

## О программе закрузки CSV файлов

При загрузке CSV файлов в базу даннных приложения, убедитесь, что названия файлов
соответствуют названию моделей приложения. В качестве пробелов между словами, в
названиях файлов, используйте "_". Можете использовать в названиях как заглавные,
так и прописные буквы. Так же убедитесь, что имена колонок в CSV файлах, которые
явлются ForeignKey, названы по принципу <имя_поля_id> (пример genre_id).
Все CSV файлы желательно закружать в директорию: ../../data.

## Работа с загрузчиком CSV файлов

В папке с файлом manage.py выполните команду:

```sh
python3 manage.py load-csv ../../data

```

## Тип лицензии

MIT


   [Django 3.2.9]: <https://www.djangoproject.com/download/>
   [Python 3.9]: <https://www.python.org/downloads/release/python-390/>
   [Docker]: <https://docs.docker.com/get-docker/>
   [Nadin007/foodgram-project-react]: https://github.com/Nadin007/foodgram-project-react
   
Проект доступен по адресу: 

Автор:
Тумарева Надежда